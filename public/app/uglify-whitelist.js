function getWhitelist(t){chrome.storage.local.get("whitelist",function(e){var i={};if(!e.whitelist||e.whitelist.constructor.name!="Array"){t(i);return}$.each(e.whitelist,function(t,e){i[e]=true});t(i)})}function saveWhitelist(t,e){chrome.storage.local.set({whitelist:Object.keys(t)},e)}function addToWhitelist(t,e){getWhitelist(function(i){i[t]=true;saveWhitelist(i,e)})}function clearWhitelist(){chrome.storage.local.remove("whitelist")}function isWhitelisted(t,e){chrome.storage.local.get(["whitelist","openServer"],function(i){if(i.openServer){e(true);return}var n={};if(!i.whitelist||i.whitelist.constructor.name!="Array"){e(false);return}$.each(i.whitelist,function(t,e){n[e]=true});e(n[t])})}$(document).ready(function(){getWhitelist(function(t){var e="// enter one email per line";$.each(Object.keys(t),function(t,i){e+="\n"+i});$("textarea").text(e)});$("#save").click(function(t){var e=$("textarea")[0].value;var i={};var n=e.split("\n");$.each(n,function(t,e){e=e.trim();if(e.startsWith("//")||!e.length)return;i[e]=true});saveWhitelist(i,function(){chrome.app.window.current().close()})})});
